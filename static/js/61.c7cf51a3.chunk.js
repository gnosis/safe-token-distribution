"use strict";(self.webpackChunkclaim_gui=self.webpackChunkclaim_gui||[]).push([[61],{9061:(n,t,e)=>{e.d(t,{SIWEController:()=>o});var i=e(3163);e(9362);var s=e(9907),a=e(5499);const l=(0,a.BX)({status:"uninitialized"}),o={state:l,subscribeKey:(n,t)=>(0,s.u$)(l,n,t),subscribe:n=>(0,a.B1)(l,(()=>n(l))),_getClient(){if(!l._client)throw new Error("SIWEController client not set");return l._client},async getNonce(n){const t=this._getClient(),e=await t.getNonce(n);return this.setNonce(e),e},async getSession(){const n=this._getClient(),t=await n.getSession();return t&&(this.setSession(t),this.setStatus("success")),t},createMessage(n){const t=this._getClient().createMessage(n);return this.setMessage(t),t},async verifyMessage(n){const t=this._getClient();return await t.verifyMessage(n)},async signIn(){const n=this._getClient();return await n.signIn()},async signOut(){var n;const t=this._getClient();await t.signOut(),this.setStatus("ready"),null===(n=t.onSignOut)||void 0===n||n.call(t)},onSignIn(n){var t;const e=this._getClient();null===(t=e.onSignIn)||void 0===t||t.call(e,n)},onSignOut(){var n;const t=this._getClient();null===(n=t.onSignOut)||void 0===n||n.call(t)},setSIWEClient(n){l._client=(0,a.KR)(n),l.status="ready",i.OptionsController.setIsSiweEnabled(n.options.enabled)},setNonce(n){l.nonce=n},setStatus(n){l.status=n},setMessage(n){l.message=n},setSession(n){l.session=n}};var r,c=e(7528),u=e(7179),g=e(8421);const d=(0,g.AH)(r||(r=(0,c.A)(["\n  :host {\n    display: flex;\n    justify-content: center;\n    gap: var(--wui-spacing-2xl);\n  }\n\n  wui-visual-thumbnail:nth-child(1) {\n    z-index: 1;\n  }\n"])));var w,h=function(n,t,e,i){var s,a=arguments.length,l=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(s=n[o])&&(l=(a<3?s(l):a>3?s(t,e,l):s(t,e))||l);return a>3&&l&&Object.defineProperty(t,e,l),l};let p=class extends g.WF{constructor(){var n;super(...arguments),this.dappImageUrl=null===(n=i.OptionsController.state.metadata)||void 0===n?void 0:n.icons,this.walletImageUrl=i.iT.getConnectedWalletImageUrl()}firstUpdated(){var n;const t=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelectorAll("wui-visual-thumbnail");null!==t&&void 0!==t&&t[0]&&this.createAnimation(t[0],"translate(18px)"),null!==t&&void 0!==t&&t[1]&&this.createAnimation(t[1],"translate(-18px)")}render(){var n;return(0,g.qy)(w||(w=(0,c.A)(["\n      <wui-visual-thumbnail\n        ?borderRadiusFull=","\n        .imageSrc=","\n      ></wui-visual-thumbnail>\n      <wui-visual-thumbnail .imageSrc=","></wui-visual-thumbnail>\n    "])),!0,null===(n=this.dappImageUrl)||void 0===n?void 0:n[0],this.walletImageUrl)}createAnimation(n,t){n.animate([{transform:"translateX(0px)"},{transform:t}],{duration:1600,easing:"cubic-bezier(0.56, 0, 0.48, 1)",direction:"alternate",iterations:1/0})}};p.styles=d,p=h([(0,u.customElement)("w3m-connecting-siwe")],p);var v,f=e(1357),S=function(n,t,e,i){var s,a=arguments.length,l=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(n,t,e,i);else for(var o=n.length-1;o>=0;o--)(s=n[o])&&(l=(a<3?s(l):a>3?s(t,e,l):s(t,e))||l);return a>3&&l&&Object.defineProperty(t,e,l),l};let m=class extends g.WF{constructor(){var n;super(...arguments),this.dappName=null===(n=i.OptionsController.state.metadata)||void 0===n?void 0:n.name,this.isSigning=!1}render(){var n;return(0,g.qy)(v||(v=(0,c.A)(['\n      <wui-flex justifyContent="center" .padding=',">\n        <w3m-connecting-siwe></w3m-connecting-siwe>\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="paragraph-500" align="center" color="fg-100"\n          >'," needs to connect to your wallet</wui-text\n        >\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="small-400" align="center" color="fg-200"\n          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect\n          you.</wui-text\n        >\n      </wui-flex>\n      <wui-flex .padding=',' gap="s" justifyContent="space-between">\n        <wui-button\n          size="md"\n          ?fullwidth=','\n          variant="shade"\n          @click=','\n          data-testid="w3m-connecting-siwe-cancel"\n        >\n          Cancel\n        </wui-button>\n        <wui-button\n          size="md"\n          ?fullwidth=','\n          variant="fill"\n          @click=',"\n          ?loading=",'\n          data-testid="w3m-connecting-siwe-sign"\n        >\n          ',"\n        </wui-button>\n      </wui-flex>\n    "])),["2xl","0","xxl","0"],["0","4xl","l","4xl"],null!==(n=this.dappName)&&void 0!==n?n:"Dapp",["0","3xl","l","3xl"],["l","xl","xl","xl"],!0,this.onCancel.bind(this),!0,this.onSign.bind(this),this.isSigning,this.isSigning?"Signing...":"Sign")}async onSign(){this.isSigning=!0,i.En.sendEvent({event:"CLICK_SIGN_SIWE_MESSAGE",type:"track"});try{o.setStatus("loading");const n=await o.signIn();return o.setStatus("success"),i.En.sendEvent({event:"SIWE_AUTH_SUCCESS",type:"track"}),n}catch(n){return i.SnackController.showError("Signature declined"),o.setStatus("error"),i.En.sendEvent({event:"SIWE_AUTH_ERROR",type:"track"})}finally{this.isSigning=!1}}async onCancel(){const{isConnected:n}=i.AccountController.state;n?(await i.ConnectionController.disconnect(),i.W3.close()):i.RouterController.push("Connect"),i.En.sendEvent({event:"CLICK_CANCEL_SIWE",type:"track"})}};S([(0,f.wk)()],m.prototype,"isSigning",void 0),m=S([(0,u.customElement)("w3m-connecting-siwe-view")],m)}}]);